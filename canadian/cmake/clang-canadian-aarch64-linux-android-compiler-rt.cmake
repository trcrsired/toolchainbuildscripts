cmake_minimum_required(VERSION 3.15)
set(CMAKE_BUILD_TYPE Release)
set(CMAKE_SYSTEM_NAME "Linux")
set(CMAKE_SYSTEM_PROCESSOR aarch64)
set(CMAKE_HOST_SYSTEM_NAME "Linux")
set(LLVM_HOST_TRIPLE aarch64-linux-android24)
set(LLVM_DEFAULT_TARGET_TRIPLE ${LLVM_HOST_TRIPLE})

set(CMAKE_C_COMPILER clang)
set(CMAKE_C_COMPILER_TARGET aarch64-linux-android24)
set(CMAKE_ASM_COMPILER ${CMAKE_C_COMPILER})
set(CMAKE_ASM_COMPILER_TARGET aarch64-linux-android24)
set(CMAKE_CXX_COMPILER clang++)
set(CMAKE_CXX_COMPILER_TARGET aarch64-linux-android24)
set(CMAKE_AR llvm-ar)
set(CMAKE_RANLIB llvm-ranlib)
set(CMAKE_FIND_ROOT_PATH ${CMAKE_SYSROOT})
set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)
set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)
set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)
set(LLVM_ENABLE_LLD On)
set(LLVM_ENABLE_LTO Thin)
set(CMAKE_CROSSCOMPILING On)
set(COMPILER_RT_DEFAULT_TARGET_ARCH ${CMAKE_SYSTEM_PROCESSOR})
set(COMPILER_RT_DEFAULT_TARGET_TRIPLE ${LLVM_DEFAULT_TARGET_TRIPLE})

set(HAVE_CXX_FLAG_WTHREAD_SAFETY Off)

set(LLVM_OPTIMIZED_TABLEGEN On)
set(LLVM_ENABLE_PIC On)

set(BUILD_SHARED_LIBS On)
set(HAS_WERROR_GLOBAL_CTORS Off)

set(ZLIB_LIBRARY ${CMAKE_SYSROOT}/${TOOLCHAIN_TRIPLE}/lib/libzlibstatic.a)
set(ZLIB_INCLUDE_DIR ${CMAKE_SYSROOT}/${TOOLCHAIN_TRIPLE}/include)
set(COMPILER_RT_EXCLUDE_ATOMIC_BUILTIN Off)

set(LLVM_ENABLE_LIBCXX On)
set(HAVE_CXX_ATOMICS64_WITHOUT_LIB On)
set(HAVE_CXX_ATOMICS_WITHOUT_LIB On)
set(LLDB_INCLUDE_TESTS Off)